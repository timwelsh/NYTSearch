<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
</head>
<body><form id='form'>
    <input type='text' id='user-input' placeholder='Type Search Here'>
    <br> 
    <button id='search'>Search</button>
    <br>
    <input type='text' id='startYear' placeholder='Begin Date Here YYYYMMDD (Optional)'>
    <br> 
    <input type='text' id='endYear' placeholder='End Date Here YYYYMMDD (Optional)'>
    <br>
    <button id='clear'>Clear Results</button>
    </form>
    <div class='top-articles'></div>
    <script>
        $('#search').on('click', function(event) {
        event.preventDefault();
        var recordsToShow = 10;
        var startYear = $('#startYear').val().trim();
        var endYear = $('#endYear').val().trim();
        var apiKey = 'ufgKlTE4GXs3MGJoJsiIbkRXLgwMS3XJ';
        var cors = 'https://cors-anywhere.herokuapp.com/';
        var userSearch = $('#user-input').val().trim();
        var dateRange = '&facet_field=day_of_week&facet=true&begin_date='+startYear+'&end_date='+endYear;
        var queryURL = cors+'https://api.nytimes.com/svc/search/v2/articlesearch.json?q='+userSearch+'&api-key='+apiKey;
        console.log(userSearch);
        $.ajax({
            url: queryURL,
            method:'GET',
        }).then(function(results){
            console.log(queryURL);
            console.log(results)
            for (var i = 0; i < results.recordsToShow; i++) {
                var articleSummary = $('<div>');
                var p = $('<p>');
                $('.top-articles').append(p);
                p.text(results.response.docs[i].snippet);
            }
        })
    });
    $('clear').on('click', function(event){
        event.preventDefault();
        $('.top-articles').innerhtml('');
    });
</script>
    
</body>
</html>